<?php
//Copyright (c) 2016 iFeiwu.com
 class Site extends Item { function __construct() { $this->table = "\x73\151\164\x65"; parent::__construct(); } protected function getData() { goto OgkTk; IR073: return $this->success($site); goto Hjr8Y; QIqnX: foreach ($data as $d) { goto YWT1A; YWT1A: $value = $d["\x76\141\x6c\165\x65"]; goto dkda8; iV3s9: fLZPV: goto wAAjR; oFEHf: ckn5W: goto iV3s9; V_Y1A: $site[$d["\156\141\x6d\x65"]] = $value; goto oFEHf; dkda8: if (!($value != '')) { goto ckn5W; } goto V_Y1A; wAAjR: } goto bhvzs; OgkTk: $data = $this->db->select($this->table)->all(); goto a2nLQ; a2nLQ: $site = array(); goto QIqnX; bhvzs: ADJqs: goto IR073; Hjr8Y: } protected function postSave($request_data) { goto wxh2x; pWQJk: $this->db->rollBack(); goto pXW2a; acuDm: return $this->success("\xe5\xb7\xb2\xe4\277\235\xe5\xad\x98\346\x9b\264\xe6\x94\xb9\357\274\x81"); goto SEmrW; wxh2x: $this->_removeFiles2($request_data["\x5f\162\x65\x6d\x6f\166\x65\x66\x69\x6c\x65\163"]); goto kV6If; TvJ37: $this->_log("\x75\160\x64\141\164\x65", array("\164\x69\164\154\x65" => "\xe7\275\x91\xe7\253\x99\350\xae\276\347\xbd\256")); goto acuDm; pdejO: goto R8FCc; goto udCSR; PHG8g: HlcaT: goto L7E8a; kV6If: unset($request_data["\164\157\x6b\145\156"], $request_data["\141\144\x6d\151\156"], $request_data["\137\162\145\x6d\157\166\x65\146\151\x6c\145\x73"]); goto ecB3v; SEmrW: R8FCc: goto NylcX; ecB3v: $error = array(); goto DzgeW; DzgeW: $this->db->beginTransaction(); goto fbqAw; YSQNB: $this->db->commit(); goto TvJ37; fbqAw: foreach ($request_data as $name => $value) { goto CkQ14; lGb0v: $error[] = $name; goto MQf5h; CkQ14: $count = $this->db->select($this->table)->where(array("\x6e\x61\155\x65", "\75", $name))->count(); goto tpbp8; fSiU6: Uxsne: goto B032p; xXSjJ: if (!($this->db->insert($this->table, array("\156\x61\155\x65" => $name, "\166\141\154\165\x65" => $value))->is() === false)) { goto pnHEU; } goto lGb0v; B032p: goto evxm0; goto nvhSY; MQf5h: pnHEU: goto hSL49; Z2vO9: $error[] = $name; goto fSiU6; nvhSY: ha4YG: goto xXSjJ; Z5mZI: if (!($this->db->update($this->table, array("\x76\141\154\165\x65" => $value), array("\156\x61\x6d\x65", "\75", $name))->is() === false)) { goto Uxsne; } goto Z2vO9; x7AKX: O4W8z: goto KdC7S; zfETN: if ($count <= 0) { goto ha4YG; } goto Z5mZI; tpbp8: $value = $this->_encode($value); goto zfETN; hSL49: evxm0: goto x7AKX; KdC7S: } goto PHG8g; udCSR: aFbxT: goto YSQNB; pXW2a: return $this->error("\xe5\267\xb2\xe4\277\235\345\xad\x98\xe5\244\261\350\xb4\xa5\357\274\201"); goto pdejO; L7E8a: if (count($error) === 0) { goto aFbxT; } goto pWQJk; NylcX: } protected function postSkin($request_data) { goto Gy_ON; Gy_ON: if (!isset($request_data["\163\164\171\154\x65\x2d\143\157\144\145"])) { goto V1P9e; } goto kQtGF; c2d1I: levcx: goto VSKLh; xVPsd: chmod($filename, 420); goto w8zmN; kQtGF: $filename = "\56\56\57\x61\163\163\145\x74\x2f\x63\x73\163\57\x73\164\x79\x6c\145\x2e\x63\163\163"; goto afzO9; afzO9: file_put_contents($filename, $request_data["\x73\x74\171\154\x65\x2d\143\157\144\x65"]); goto xVPsd; kymO6: if (!isset($request_data["\x74\150\x65\155\x65\x2d\163\x6b\x69\x6e"])) { goto JwZ30; } goto ojF9l; bhZl5: foreach ($request_data as $name => $value) { $this->_saveData($this->table, array("\156\x61\155\x65" => $name, "\x76\141\x6c\165\x65" => $value), array("\x6e\141\x6d\x65", "\x3d", $name)); o546B: } goto c2d1I; mVP1c: JwZ30: goto bhZl5; tJVFH: $request_data["\163\x6b\151\156"] = $skins[1]; goto mVP1c; w8zmN: V1P9e: goto tejJ4; ojF9l: $skins = explode("\55", $request_data["\164\150\x65\x6d\145\55\x73\x6b\151\x6e"]); goto ps2qE; VSKLh: return $this->success("\xe5\267\262\344\xbf\x9d\xe5\255\x98\346\233\xb4\346\224\271\357\xbc\201"); goto wwJ0F; tejJ4: unset($request_data["\x74\157\153\145\156"], $request_data["\141\x64\155\151\x6e"], $request_data["\x73\164\171\154\x65\55\143\157\x64\145"]); goto kymO6; ps2qE: $request_data["\x74\150\x65\155\x65"] = $skins[0]; goto tJVFH; wwJ0F: } protected function getStyleCode() { $code = file_get_contents("\56\x2e\x2f\141\163\163\145\164\x2f\143\163\163\57\163\164\171\x6c\145\x2e\143\x73\x73"); return $this->success(array($code)); } }
