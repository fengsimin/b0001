<?php
//Copyright (c) 2016 iFeiwu.com
 class Trash extends Item { function __construct() { $this->table = "\164\162\141\163\x68"; parent::__construct(); } protected function postDelete($request_data) { goto MCD4j; nGdgP: if (count($error) === 0) { goto QAk4V; } goto wDVcg; wDVcg: $this->db->rollBack(); goto o0DVQ; pROEE: foreach ($ids as $id) { goto vVrOb; CJ8H7: t5da2: goto pj250; EGXn6: goto t5da2; goto VWiBA; VWiBA: FroaB: goto zwwOp; zwwOp: if (!($path && count(explode("\x2f", $path)) >= 2)) { goto flUws; } goto kNMe4; xwNIU: flUws: goto CJ8H7; vVrOb: $trash = $this->db->select($this->table)->where(array("\x69\x64", "\75", $id))->get(); goto FVUtu; FVUtu: $path = $trash["\x70\x61\x74\150"]; goto Xi0d9; kNMe4: $this->_rmdir("\56\56\57" . $path); goto xwNIU; Xi0d9: if ($this->db->delete($this->table, array("\151\x64", "\75", $id))->is()) { goto FroaB; } goto q8mEL; q8mEL: $error[] = $trash["\x74\x69\x74\x6c\145"]; goto EGXn6; pj250: s4Mqg: goto HLdJW; HLdJW: } goto eVy4d; Ungtp: QAk4V: goto bJYbq; SBewu: return $this->success(); goto wfn1J; wfn1J: u9NRB: goto gdrRR; bJYbq: $this->db->commit(); goto V1LxB; tbqdW: $ids = $request_data["\151\x64"]; goto DKzIB; V1LxB: $this->_log("\144\x65\x6c\x65\x74\x65", array("\164\151\x74\x6c\145" => count($ids))); goto SBewu; DKzIB: $this->db->beginTransaction(); goto pROEE; P20NH: goto u9NRB; goto Ungtp; eVy4d: r5cSz: goto nGdgP; o0DVQ: return $this->error(); goto P20NH; MCD4j: $error = array(); goto tbqdW; gdrRR: } protected function postReplay($request_data) { goto Pokej; lH0P6: eEqRm: goto t2atv; AVgbD: $this->db->beginTransaction(); goto Y0jV_; mYPmr: return $this->success(); goto lH0P6; Y0jV_: foreach ($ids as $id) { goto UhT6k; rw7FF: if ($isadd === false) { goto pz5q0; } goto XrpKM; FwZqn: $isadd = $this->db->insert($table, json_decode($trash["\144\141\x74\141"], true)); goto rw7FF; OwofV: goto vSZVD; goto Znwvn; XrpKM: $this->db->delete($this->table, array("\151\x64", "\75", $id)); goto OwofV; Nn37c: $table = $trash["\164\x61\x62\154\x65"]; goto FwZqn; Znwvn: pz5q0: goto zBqna; f_2Dt: hsB_L: goto BkL19; RgP0b: vSZVD: goto f_2Dt; UhT6k: $trash = $this->db->select($this->table)->where(array("\x69\x64", "\75", $id))->get(); goto Nn37c; zBqna: $error[] = $trash["\164\151\164\x6c\145"]; goto RgP0b; BkL19: } goto wRTcP; Pokej: $error = array(); goto DbBb9; wRTcP: mOEm0: goto b6Sdj; vm6H2: $this->db->commit(); goto js31_; ZyTzO: return $this->error(); goto kAeUh; iLRBL: vC1fb: goto vm6H2; DbBb9: $ids = $request_data["\151\x64"]; goto AVgbD; kAeUh: goto eEqRm; goto iLRBL; b6Sdj: if (count($error) === 0) { goto vC1fb; } goto qt3Jt; js31_: $this->_log("\162\145\160\x6c\x79", array("\x74\x69\164\154\x65" => count($ids))); goto mYPmr; qt3Jt: $this->db->rollBack(); goto ZyTzO; t2atv: } }
