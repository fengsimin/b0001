<?php
//Copyright (c) 2016 iFeiwu.com
 class Admin extends Item { function __construct() { $this->table = "\x61\144\155\151\x6e"; parent::__construct(); } public function postLogin($request_data) { goto tHlch; kLITP: $hasher = new PasswordHash(8, false); goto dikHK; dikHK: if ($hasher->CheckPassword($pass, $admin["\160\x61\163\x73"])) { goto aPcFJ; } goto RAYSI; uEaDs: return $this->success($admin); goto sDlMf; sTfSX: F9Au0: goto tMk71; Bciym: $admin = $this->db->select($this->table)->where("\163\164\141\x74\145\x20\x3d\40\x31\x20\x41\x4e\x44\40\x6e\x61\x6d\145\40\75\x20\77", array($name))->get(); goto uMIwn; d9rjJ: $this->_log("\x6c\x6f\x67\151\156", array("\141\x64\155\x69\156\137\151\x64" => $admin["\x69\144"], "\141\x64\155\x69\x6e\x5f\x6e\x61\155\145" => $admin["\x6e\141\x6d\x65"])); goto uEaDs; RAYSI: return $this->error("\347\224\xa8\xe6\x88\267\xe5\220\x8d\346\x88\x96\xe5\257\x86\347\xa0\x81\344\xb8\215\346\255\xa3\xe7\241\xae\357\xbc\201"); goto OKa0t; m7Yk8: $json["\x6c\157\147\x69\x6e\x5f\164\151\155\145"] = date("\131\55\155\55\x64\x20\x48\72\151"); goto qcl4e; nt4RJ: $json = json_decode($admin["\x6a\x73\157\156"], true); goto m7Yk8; OMHyP: $admin["\x72\x75\x6e\164\x69\155\x65"] = $this->_runtime(); goto d9rjJ; qcl4e: $json["\x6c\157\147\151\156\x5f\x69\160"] = $this->_getIP(); goto zIPMg; tMk71: ifeiwu\Loader::import("\145\170\164\x65\156\x64\x2f\x50\141\163\x73\167\x6f\162\144\110\x61\x73\x68"); goto kLITP; OKa0t: aPcFJ: goto nt4RJ; nsW0I: return $this->error("\347\x94\250\xe6\x88\267\345\220\215\346\210\x96\345\257\x86\347\xa0\201\xe4\xb8\x8d\346\xad\xa3\347\241\xae\xef\274\x81"); goto sTfSX; W4De1: $pass = $request_data["\160\x61\163\163"]; goto Bciym; tHlch: $name = $request_data["\x6e\141\155\x65"]; goto W4De1; zIPMg: $json["\x6c\x6f\147\151\156\x5f\x63\x6f\165\x6e\x74"] = $json["\x6c\157\x67\151\x6e\137\x63\157\x75\x6e\x74"] + 1; goto vcA02; vcA02: $this->db->update($this->table, array("\152\163\157\x6e" => json_encode($json)), array("\151\144", "\75", $admin["\151\144"])); goto OMHyP; uMIwn: if ($admin) { goto F9Au0; } goto nsW0I; sDlMf: } protected function postPassword($id, $request_data) { goto F1T7w; ola6o: goto HODlo; goto gDw_Y; CsTkl: $hasher = new PasswordHash(8, false); goto PhIns; PhIns: if ($hasher->CheckPassword($old_pass, $admin["\160\x61\x73\163"])) { goto HmtWn; } goto H2jSj; cm9sO: $json = json_decode($admin["\x6a\163\x6f\156"], true); goto EGGb5; DMTma: ifeiwu\Loader::extend("\x50\141\163\x73\x77\157\162\x64\110\141\x73\x68"); goto CsTkl; B65mE: HODlo: goto y3MlH; gDw_Y: YWlFp: goto sYur1; szcoZ: return $this->error("\350\257\xb7\xe7\xa8\215\345\x80\x99\xe5\206\x8d\350\xaf\225\x2e\56\x2e"); goto ola6o; H2jSj: return $this->error("\xe6\x97\xa7\xe5\xaf\206\xe7\240\x81\344\xb8\215\346\xad\243\347\241\xae\357\xbc\201"); goto HbG79; us0Zf: $pass = $request_data["\x70\x61\163\163"]; goto DMTma; F1T7w: $admin = $this->db->select($this->table)->where("\x73\164\141\x74\145\40\x3d\40\x31\40\101\x4e\x44\x20\151\144\x20\x3d\40\77", array($id))->get(); goto IvGRd; IvGRd: $old_pass = $request_data["\157\x6c\x64\160\141\x73\x73"]; goto us0Zf; HbG79: HmtWn: goto cm9sO; omE2T: if ($this->db->update($this->table, $data, array("\151\x64", "\x3d", $id))->is()) { goto YWlFp; } goto szcoZ; sYur1: return $this->success("\xe8\257\267\xe4\275\277\xe7\224\250\xe6\226\xb0\xe5\257\x86\xe7\240\201\xe9\207\215\346\x96\xb0\347\231\273\xe5\xbd\225\357\274\x81"); goto B65mE; wC3nh: $data = array("\160\141\163\163" => $hasher->HashPassword($pass), "\x6a\163\157\x6e" => json_encode($json)); goto omE2T; EGGb5: $json["\160\x61\163\163\137\x74\x69\x6d\x65"] = time(); goto wC3nh; y3MlH: } protected function postPassword2($request_data) { goto JyqBo; BnMYG: return $this->error("\351\224\x99\350\257\xaf\xef\xbc\214\xe8\257\xb7\347\250\215\345\200\x99\345\x86\215\xe8\257\x95\56\56\x2e"); goto DTVcl; DTVcl: goto n3vTt; goto NpBvF; H3EhC: return $this->success(); goto oqZjv; vWpH6: ifeiwu\Loader::extend("\120\141\x73\x73\167\157\162\x64\110\141\163\x68"); goto sCEib; NpBvF: BGT1j: goto H3EhC; sCEib: $hasher = new PasswordHash(8, false); goto ojhLo; oqZjv: n3vTt: goto St6I_; ojhLo: if ($this->db->update($this->table, array("\x70\141\163\163" => $hasher->HashPassword($pass)), "\151\x64\x20\75\x20\x31")->is()) { goto BGT1j; } goto BnMYG; JyqBo: $pass = $request_data["\x70\141\x73\x73"]; goto vWpH6; St6I_: } protected function postAdd($request_data) { goto mxFJd; g3vxN: $data["\152\x73\157\156"] = json_encode(array("\x6c\x61\163\164\x5f\164\x69\155\145" => "\x2d\55\55\55\x2d", "\154\141\163\x74\x5f\151\160" => "\x30\x2e\x30\56\60\x2e\60", "\x6c\157\x67\151\156\137\143\x6f\165\156\164" => 0)); goto kZJbX; m2TN6: return $this->error("\345\xb8\x90\xe5\x8f\267\xe5\267\xb2\xe5\xad\x98\345\x9c\xa8\357\274\x81"); goto d1oS2; MYn8b: Lp9na: goto NTXLi; NTXLi: $this->_log("\141\144\144", array("\164\x69\164\x6c\x65" => $data["\156\x61\155\x65"])); goto FLdz7; kZJbX: $data["\143\164\x69\x6d\x65"] = time(); goto JOjL1; EGNA3: $data["\x6e\x61\155\x65"] = $request_data["\x6e\141\155\x65"]; goto pIM9b; TfFpU: br8vV: goto cBhs5; JOjL1: if ($this->db->insert($this->table, $data)->is()) { goto Lp9na; } goto m2TN6; FLdz7: return $this->success(); goto TfFpU; s55G1: $data["\x72\142\141\x63"] = $request_data["\x72\142\x61\143"] ?: "\x6e\157\x72\x6d\x61\x6c"; goto g3vxN; pIM9b: $data["\160\141\x73\x73"] = $hasher->HashPassword($request_data["\160\141\163\x73"]); goto r2p9u; r2p9u: $data["\163\x74\141\x74\145"] = $request_data["\x73\164\x61\164\x65"] ?: 0; goto s55G1; mxFJd: ifeiwu\Loader::import("\145\170\x74\x65\156\x64\57\120\141\163\163\167\157\162\x64\x48\141\163\150"); goto Eshox; d1oS2: goto br8vV; goto MYn8b; Eshox: $hasher = new PasswordHash(8, false); goto EGNA3; cBhs5: } protected function postUpdate($id, $request_data) { goto Gji2S; hlnX7: $data["\141\144\x64\162\145\163\163"] = $request_data["\141\144\144\x72\145\163\163"]; goto IeF4w; NQe1i: aBLMI: goto nMMPu; nSO3k: if (!isset($request_data["\x72\142\141\143"])) { goto aBLMI; } goto OTZEB; xFcyO: r0WOU: goto BdtoY; nMMPu: if (!isset($request_data["\160\x61\163\163"])) { goto r0WOU; } goto OqCNS; fXy_K: if (!isset($request_data["\x6e\141\155\145"])) { goto byE82; } goto SQ0eB; PGgHz: auwTI: goto nSO3k; Bpmhd: ZBoeB: goto E0A_j; GT3Sb: byE82: goto a2_23; Gji2S: ifeiwu\Loader::import("\x65\170\x74\x65\156\144\x2f\120\141\163\163\x77\157\x72\144\x48\141\x73\150"); goto Nb7zq; wvCSp: $data["\x75\164\151\155\145"] = time(); goto vylkc; E0A_j: $this->_log("\x75\160\x64\x61\x74\x65", array("\x74\151\164\154\x65" => $data["\156\x61\x6d\145"])); goto QZkFh; fmpL3: $data["\x71\x71"] = $request_data["\161\x71"]; goto Fw2rK; Nb7zq: $hasher = new PasswordHash(8, false); goto fXy_K; civaD: $data["\x73\164\x61\x74\x65"] = $request_data["\x73\164\x61\164\x65"]; goto PGgHz; OTZEB: $data["\162\142\141\143"] = $request_data["\x72\142\141\x63"]; goto NQe1i; IeF4w: $data["\155\x6f\x62\x69\154\x65"] = $request_data["\155\x6f\142\151\x6c\145"]; goto FmHl_; OqCNS: $data["\160\x61\163\x73"] = $hasher->HashPassword($request_data["\160\141\x73\163"]); goto xFcyO; Fw2rK: $data["\163\x65\x78"] = $request_data["\163\x65\170"]; goto wvCSp; D4aOX: return $this->error("\350\xaf\xb7\xe7\250\215\xe5\x80\x99\xe5\206\215\xe8\257\x95\x2e\x2e\x2e"); goto KHFqn; KHFqn: goto kH75W; goto Bpmhd; vylkc: if ($this->db->update($this->table, $data, array("\151\144", "\x3d", $id))->is()) { goto ZBoeB; } goto D4aOX; lHYfZ: kH75W: goto pW67S; SQ0eB: $data["\x6e\x61\x6d\145"] = $request_data["\x6e\141\x6d\145"]; goto GT3Sb; QZkFh: return $this->success(); goto lHYfZ; a2_23: if (!isset($request_data["\x73\x74\141\x74\145"])) { goto auwTI; } goto civaD; FmHl_: $data["\x69\156\x74\162\157"] = $request_data["\151\156\164\162\157"]; goto fmpL3; BdtoY: $data["\x72\145\x61\x6c\156\141\155\145"] = $request_data["\x72\145\x61\154\156\x61\155\x65"]; goto hlnX7; pW67S: } protected function postDelete($request_data) { goto BNrRZ; dbG7S: foreach ($ids as $id) { $this->db->delete($this->table, array("\151\144", "\x3d", $id)); hqM8K: } goto PnjGU; PnjGU: ZhSiM: goto K4Ohv; BNrRZ: $ids = $request_data["\151\x64"]; goto dbG7S; K4Ohv: return $this->success(); goto MY2bo; MY2bo: } protected function postToken($request_data) { goto ODY7n; fLb3n: if (!file_put_contents("\164\x6f\153\145\156\56\x70\150\x70", "\x3c\77\160\x68\160\x20\x72\145\164\165\162\156\40\47{$token}\47\x3b")) { goto vX4pK; } goto A9FUS; ODY7n: if (!($token = $request_data["\164\x6f\153\x65\x6e"])) { goto QVkMU; } goto fLb3n; A9FUS: return $this->success(); goto wqJep; wqJep: vX4pK: goto QjMO2; QjMO2: QVkMU: goto zM4Jj; zM4Jj: return $this->error("\346\262\241\xe6\234\x89\xe6\x9d\203\xe9\x99\220\346\x9b\xb4\346\x8d\xa2\345\257\x86\xe9\x92\xa5\357\274\x81"); goto hzu03; hzu03: } protected function postUpgrade($request_data) { goto N65aU; nqKRf: unlink("\56\x2e\57\165\160\x64\141\164\145\x2e\x70\x68\160"); goto l8AuK; jMriY: $curl_post = array("\166\x69\145\x77\x5f\x67\151\164" => $request_data["\166\151\145\167\137\x67\151\164"], "\166\x69\145\167\137\156\x61\155\145" => $request_data["\166\x69\x65\167\137\x6e\141\155\x65"], "\166\151\145\x77\137\x76\x65\x72\x73\151\157\156" => $request_data["\166\x69\x65\167\137\x76\145\162\x73\151\157\156"]); goto TkGLf; DA9_H: curl_setopt($ch, CURLOPT_HEADER, 0); goto UikMZ; GAIMi: return $this->error("\346\227\xa0\xe6\263\225\xe8\xaf\xbb\xe5\217\x96\xe6\x96\x87\344\xbb\xb6\xef\xbc\x8c\xe8\257\xb7\xe8\x81\224\xe7\263\xbb\xe9\243\x9e\345\xb1\x8b\345\256\xa2\346\234\215\xe3\200\x82"); goto pXXiy; TFfx5: curl_setopt($ch, CURLOPT_URL, $curl_url . "\57\x75\160\147\x72\x61\144\x65\56\x70\150\x70"); goto DA9_H; UikMZ: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto tTxbW; SXeqj: Q2qdg: goto PvfuG; m0mgh: n0N8j: goto tLt_m; VnPqC: curl_close($ch); goto l03RL; X68oY: return $this->error($json["\155\145\163\163\x61\147\x65"]); goto m0mgh; pXXiy: kavZu: goto bTA4q; QVh5x: if (!($upgrade_code === false)) { goto kavZu; } goto GAIMi; tTxbW: curl_setopt($ch, CURLOPT_POST, 1); goto xujw0; Fh7W9: return $this->success("\xe8\xbd\xbb\347\275\x91\347\253\x99\345\x8d\x87\xe7\272\247\346\210\x90\xe5\x8a\x9f\357\xbc\201"); goto XNpJx; xujw0: curl_setopt($ch, CURLOPT_POSTFIELDS, $curl_post); goto ktPQ3; N65aU: $ctx = stream_context_create(array("\150\164\164\160" => array("\164\x69\x6d\x65\157\165\164" => 30))); goto S0k9U; bTA4q: if (file_put_contents("\56\56\x2f\165\x70\x67\162\141\144\x65\56\x70\x68\x70", $upgrade_code)) { goto Q2qdg; } goto HCWMi; PvfuG: $curl_url = "\x68\x74\x74\x70\x3a\57\57" . $_SERVER["\123\105\x52\126\105\x52\x5f\x4e\101\x4d\x45"] . implode("\57", array_slice(explode("\57", $_SERVER["\123\103\x52\111\120\124\x5f\116\101\115\x45"]), 0, -2)); goto jMriY; S0k9U: $upgrade_code = file_get_contents("\x68\x74\164\160\x3a\57\x2f\x69\146\x65\151\x77\165\x2e\143\157\x6d\57\147\x65\x74\x2f\x75\x70\x67\x72\x61\x64\x65\x3f\164\x3d" . time(), 0, $ctx); goto QVh5x; l8AuK: unlink("\56\x2e\57\x64\x61\164\x61\142\141\x73\145\56\163\x71\154"); goto Fh7W9; TkGLf: $ch = curl_init(); goto TFfx5; l03RL: $json = json_decode($json, true); goto TtgA0; ktPQ3: $json = curl_exec($ch); goto VnPqC; tLt_m: unlink("\56\56\57\165\x70\x67\162\x61\144\x65\x2e\x70\x68\x70"); goto nqKRf; TtgA0: if (!($json["\143\x6f\x64\x65"] == 1)) { goto n0N8j; } goto X68oY; HCWMi: return $this->error("\xe6\227\240\346\263\225\xe5\x86\231\345\x85\xa5\xe6\226\x87\xe4\273\xb6\xef\xbc\214\xe8\257\267\346\x8a\x8a\347\x9b\xae\xe5\xbd\x95\350\xae\xbe\xe7\xbd\xae\xe4\xb8\xba\60\x37\x37\x37\xe5\217\257\345\x86\231\346\235\x83\351\x99\220\xef\274\x81"); goto SXeqj; XNpJx: } protected function postPublish() { goto ix62A; CKhGP: if (is_dir("\56\56\57\144\x61\164\141\x2f\x63\141\x63\150\145\57")) { goto K8O1Z; } goto bfJXw; ix62A: $this->_saveData("\x73\x69\164\145", array("\156\141\155\145" => "\x76\x65\x72\x73\151\x6f\x6e", "\x76\x61\x6c\165\145" => time()), array("\156\141\x6d\145", "\75", "\166\x65\x72\163\151\x6f\x6e")); goto CKhGP; tw0wq: K8O1Z: goto HA1QP; X9f69: goto cgzDc; goto M06Q4; M06Q4: QGTu8: goto iWVeN; iWVeN: return $this->success(); goto ZOSDq; Cz4DP: return $this->error(); goto X9f69; bfJXw: return $this->success(); goto tw0wq; HA1QP: if ($this->_rmdir("\x2e\56\x2f\144\141\x74\x61\x2f\x63\x61\143\150\145\x2f") !== false) { goto QGTu8; } goto Cz4DP; ZOSDq: cgzDc: goto c6wMF; c6wMF: } protected function getFiles($dir, $ext) { goto RixbL; rAOuy: $files[] = array("\156\x61\155\x65" => $filename, "\x63\x6f\156\164\x65\x6e\x74" => $file_content); goto cC_gy; rIDyr: if (!($ext == "\x2a" || strpos($filename, $ext))) { goto L_9H3; } goto Yoy4c; BzkmK: closedir($handle); goto dpWAG; RixbL: $dir = $dir ? $dir : "\56"; goto ai_28; mAvbs: if ($handle) { goto j3oSc; } goto HouZZ; Lpup1: if (!($file != "\x2e" && $file != "\x2e\x2e")) { goto LFKH7; } goto G6FZq; bLqHX: LFKH7: goto qDzKI; Yoy4c: $file_content = file_get_contents($filename); goto rAOuy; cC_gy: L_9H3: goto bLqHX; HouZZ: return $this->error($dir . "\xe6\227\xa0\xe6\xb3\x95\xe6\x89\223\345\274\x80\347\x9b\256\345\xbd\x95\xef\xbc\201"); goto Vn8jY; ai_28: $ext = $ext ? $ext : "\x2e\160\150\160"; goto Ic1bJ; VRo04: rdMGz: goto Km1do; Vn8jY: goto rdMGz; goto nxXaM; Kf9v2: if (!(false !== ($file = readdir($handle)))) { goto w1Fwk; } goto Lpup1; G6FZq: $filename = $dir . "\x2f" . $file; goto rIDyr; nxXaM: j3oSc: goto MzNd2; Ic1bJ: $handle = opendir($dir); goto mAvbs; MzNd2: Qivdh: goto Kf9v2; ynRJC: w1Fwk: goto BzkmK; qDzKI: goto Qivdh; goto ynRJC; dpWAG: return $this->success($files); goto VRo04; Km1do: } protected function getFileContent($filename) { goto GzQy5; GzQy5: if (file_exists($filename)) { goto h6UYS; } goto FH2_0; WtbQa: h6UYS: goto OHzND; OHzND: $content = file_get_contents($filename); goto gwlgU; q0E2a: TxUJJ: goto sczj3; gwlgU: return $this->success(array("\x6e\141\155\x65" => $filename, "\143\157\156\x74\145\x6e\164" => $content)); goto q0E2a; FH2_0: return $this->error($filename . "\x20\xe6\x96\x87\344\273\xb6\344\xb8\215\xe5\xad\x98\345\x9c\xa8\357\xbc\x81"); goto wAIkK; wAIkK: goto TxUJJ; goto WtbQa; sczj3: } protected function getFileConfig($name) { goto TmIKh; PdAak: return include $filename; goto ljRR6; ufrIH: return $this->error($filename . "\40\346\226\207\344\273\266\344\xb8\x8d\xe5\xad\x98\xe5\234\250\357\xbc\x81"); goto ATXfb; MEdmi: rpsmn: goto PdAak; ATXfb: goto sYnP0; goto MEdmi; ejeYD: if (file_exists($filename)) { goto rpsmn; } goto ufrIH; ljRR6: sYnP0: goto i3_yY; TmIKh: $filename = "\56\56\57\x63\x6f\156\x66\151\147\57" . $name . "\56\160\150\160"; goto ejeYD; i3_yY: } protected function postFileWrite($request_data) { goto MZ7Ih; MVCR4: chmod($filename, 493); goto l7XQr; LXaI6: goto UJ1vO; goto CYGrn; CYGrn: G0D1v: goto MVCR4; EsOVw: UJ1vO: goto gw7pd; SSou4: chmod($filename, 420); goto KmNFx; KmNFx: return $this->success(); goto EsOVw; VtHvY: return $this->error(); goto LXaI6; MZ7Ih: $filename = $request_data["\x66\x69\x6c\x65\x6e\x61\155\x65"]; goto tWQpO; l7XQr: file_put_contents($filename, $content); goto SSou4; tWQpO: $content = $request_data["\x63\157\156\164\145\156\164"]; goto XgDV0; XgDV0: if ($filename && $content) { goto G0D1v; } goto VtHvY; gw7pd: } protected function getBackup() { goto r0KUY; YKFT_: $smtp_backup_types = explode("\x2c", $smtp_backup_type); goto Zmdr5; dnAKk: $this->_mkdir("\164\x65\x6d\160\x2f"); goto Z43gW; gRfhT: eZmac: goto sHn4j; Z43gW: if (!$smtp_backup_type) { goto GlAjQ; } goto YKFT_; Zmdr5: foreach ($smtp_backup_types as $type) { goto bzoV2; bzoV2: $config["\142\141\x63\153\x75\160\x5f\164\x79\160\145"] = $type; goto tXJbX; UvJ9E: $false_count++; goto B0XVg; ikIzd: @unlink("\164\x65\x6d\x70\x2f" . $config["\x62\141\143\x6b\x75\160\137\x6e\x61\155\x65"]); goto r0Txp; r0Txp: TDl1Y: goto nd__W; tXJbX: $config["\142\x61\143\153\165\x70\x5f\156\141\x6d\145"] = $this->_getPackedFileName($type); goto ddnw1; B0XVg: rPvVU: goto ikIzd; ddnw1: if ($this->_backupEmail($config)) { goto rPvVU; } goto UvJ9E; nd__W: } goto DxlJI; P3uIZ: if (!$qiniu_backup_type) { goto KpX90; } goto E_K2w; BnGGq: $config = ifeiwu\Config::get("\x62\x61\x63\x6b\165\160"); goto oT9G_; Wie5o: return $this->success(); goto qGAtT; B84ci: KpX90: goto BzHa0; r0KUY: set_time_limit(0); goto BnGGq; E_K2w: $qiniu_backup_types = explode("\x2c", $qiniu_backup_type); goto y4ywE; y4ywE: foreach ($qiniu_backup_types as $type) { goto p1iZR; GBxEE: $false_count++; goto lzlzW; b9TYZ: $config["\x62\x61\x63\153\165\x70\137\156\x61\x6d\x65"] = $this->_getPackedFileName($type); goto RJwub; lzlzW: sG2hO: goto Ihzgn; qjNC3: Yu2Oi: goto iOdzk; p1iZR: $config["\142\x61\x63\153\x75\160\137\x74\171\160\x65"] = $type; goto b9TYZ; RJwub: if ($this->_backupQiniu($config)) { goto sG2hO; } goto GBxEE; Ihzgn: @unlink("\164\145\155\160\57" . $config["\142\x61\143\153\x75\160\137\x6e\x61\x6d\x65"]); goto qjNC3; iOdzk: } goto Azkha; DxlJI: iOMqc: goto vMLPp; oT9G_: $smtp_backup_type = $config["\163\x6d\x74\x70\x5f\142\141\143\x6b\165\x70\x5f\x74\171\160\x65"]; goto ZHE67; ZHE67: $false_count = 0; goto dnAKk; lJYf4: NdjMA: goto fzJkE; Azkha: wn_Yc: goto B84ci; BzHa0: if ($false_count > 0) { goto eZmac; } goto Wie5o; vMLPp: GlAjQ: goto nHcsO; qGAtT: goto NdjMA; goto gRfhT; sHn4j: return $this->error("\xe6\x9c\211\351\203\xa8\xe5\x88\206\346\225\260\xe6\215\256\xe5\xa4\207\344\xbb\275\345\xa4\xb1\350\264\xa5\xef\xbc\201"); goto lJYf4; nHcsO: $qiniu_backup_type = $config["\161\151\x6e\151\165\x5f\x62\141\143\153\x75\x70\137\164\x79\160\x65"]; goto P3uIZ; fzJkE: } private function _getPackedFileName($type) { goto WAZb5; WAZb5: ifeiwu\Loader::import("\x65\170\164\x65\156\x64\x2f\120\143\x6c\132\x69\160"); goto WSKvg; TxEg1: $bool = $archive->create("\x2e\x2e\x2f\141\x73\x73\x65\164\x2c\x2e\x2e\57\143\x6f\156\x74\162\157\x6c\154\145\162\54\x2e\56\57\143\157\x6e\146\151\x67\x2c\x2e\56\57\151\146\145\x69\167\165\x2c\56\56\57\x76\151\x65\167\x2c\56\56\57\x63\x6f\x6d\x6d\x6f\156\56\x70\x68\x70\54\x2e\56\x2f\x69\156\144\145\170\x2e\160\x68\160\54\56\56\x2f\x2e\x68\x74\141\143\143\x65\x73\163\x2c\56\56\57\156\x67\151\156\170\x2e\143\157\x6e\x66", PCLZIP_OPT_REMOVE_PATH, "\56\56\57"); goto oyOV4; nKGgh: FVlkt: goto Zl2GU; I2QOy: @unlink($sql_name); goto K3sGJ; QVW6E: JcMVa: goto AcFO2; S6leC: if ($type == "\144\142") { goto uSJgM; } goto g7Jwe; oyOV4: b2fu2: goto g1CAU; qDG7f: $zip_name = $name . "\x2e\x74\x61\x72\x2e\x67\x7a"; goto BnP6F; zGCSX: $sql_name = $name . "\x2e\x73\161\154"; goto R4c2W; sGx1f: $archive = new PclZip($zip_path); goto WKqKR; MGjfT: $bool = $archive->create("\56\x2e\57\144\141\x74\x61", PCLZIP_OPT_REMOVE_PATH, "\x2e\x2e\x2f"); goto PzFsz; WKqKR: $bool = $archive->create($sql_name); goto I2QOy; Aqc7T: if ($type == "\143\x6f\x64\x65") { goto FVlkt; } goto oqWyh; PzFsz: goto b2fu2; goto nKGgh; AcFO2: $archive = new PclZip($zip_path); goto MGjfT; oqWyh: goto b2fu2; goto fyi_f; FJ43w: return ''; goto ZCTA3; ZCTA3: goto GwxHZ; goto SoaKx; NNqcr: $bool = $mb->export(); goto bh2oF; K3sGJ: VnXwS: goto yQCAI; SoaKx: nD6LP: goto kN3wr; R4c2W: ifeiwu\Loader::import("\145\170\x74\145\x6e\x64\x2f\115\171\x73\161\x6c\x42\141\143\x6b\x75\x70"); goto zUptJ; WSKvg: $name = date("\x59\155\x64\x48\x69\163") . "\137" . $type; goto qDG7f; zUptJ: $mb = new MysqlBackup(ifeiwu\Config::get("\144\141\x74\x61\x62\x61\x73\145")); goto eXzwe; kN3wr: return $zip_name; goto IrezJ; bh2oF: if (!$bool) { goto VnXwS; } goto sGx1f; fyi_f: uSJgM: goto zGCSX; IrezJ: GwxHZ: goto V463L; eXzwe: $mb->setPath(__DIR__); goto folJ9; g1CAU: if ($bool) { goto nD6LP; } goto FJ43w; yQCAI: goto b2fu2; goto QVW6E; g7Jwe: if ($type == "\x64\x61\x74\x61") { goto JcMVa; } goto Aqc7T; Zl2GU: $archive = new PclZip($zip_path); goto TxEg1; BnP6F: $zip_path = "\x74\x65\x6d\160\x2f" . $zip_name; goto S6leC; folJ9: $mb->setName($sql_name); goto NNqcr; V463L: } private function _backupQiniu($config) { goto g4LgF; bxFB8: $filename = __DIR__ . "\57\x74\145\155\x70\x2f" . $config["\x62\141\143\153\x75\160\137\156\141\155\145"]; goto h6_Km; V45P3: $this->_debug($err); goto WbASv; kbXNw: goto ViX6l; goto UYWvz; UYWvz: R3wgS: goto V45P3; L0p7G: $uploadMgr = new \Qiniu\Storage\UploadManager(); goto lGCGE; ZwLAt: return true; goto kbXNw; eBKJz: $accessKey = $config["\x71\151\x6e\151\x75\x5f\x61\143\x63\145\163\x73\137\x6b\145\x79"]; goto KjbZg; zXzry: $auth = new \Qiniu\Auth($accessKey, $secretKey); goto UE3Zt; h6_Km: $key = $config["\x62\x61\143\x6b\165\160\137\156\141\x6d\x65"]; goto L0p7G; WbASv: return false; goto tMBIh; XiW53: if ($err !== null) { goto R3wgS; } goto ZwLAt; g4LgF: require_once VEN_PATH . "\x51\151\x6e\151\165\57\x66\x75\x6e\x63\164\151\x6f\x6e\x73\56\160\x68\x70"; goto eBKJz; tMBIh: ViX6l: goto XSZzF; lGCGE: list($ret, $err) = $uploadMgr->putFile($token, $key, $filename); goto XiW53; UE3Zt: $bucket = $config["\x71\151\156\x69\x75\137\x62\165\143\153\145\164\x5f\156\141\x6d\x65"]; goto Hemvq; Hemvq: $token = $auth->uploadToken($bucket); goto bxFB8; KjbZg: $secretKey = $config["\161\x69\x6e\x69\x75\137\x73\x65\143\162\x65\x74\137\x6b\145\x79"]; goto zXzry; XSZzF: } private function _backupEmail($config) { goto DuNt8; IVJSC: $mailer->setContent(date("\131\345\xb9\xb4\x6d\xe6\x9c\x88\x64\346\227\xa5\40\x48\xe6\x97\266\151\xe5\x88\x86\163\xe7\247\222") . "\x20\345\244\x87\xe4\273\xbd\345\xa4\261\350\264\245\xef\274\x81", false); goto CVB0i; vU8gj: if ($backup_type == "\x63\x6f\144\145") { goto V0TE4; } goto sJEo7; yuOeU: Q69Kt: goto a6EaH; Gd18_: goto Q69Kt; goto Fo0Md; hHyRQ: goto NmD4I; goto zgRrg; ZpT16: if (!$config["\x62\x61\143\x6b\x75\160\137\156\x61\x6d\x65"]) { goto pi62S; } goto Gx3en; iVuuW: goto Drtpb; goto cU1zw; UG77Q: rrWYf: goto MEPgt; bRnXC: w0hN9: goto Ru0gl; RTUg7: if ($backup_type == "\x64\x62") { goto gbzVx; } goto r5s8D; bUYjl: goto z6vfF; goto OsHAs; zvnoA: $mailer->setTitle("\347\275\x91\xe7\xab\231\x5b\346\225\xb0\xe6\215\xae\345\xba\x93\x5d\xe5\xa4\x87\xe4\273\275"); goto ZpT16; MHKzv: $mailer->addAttachment($filename); goto BqDN9; BqDN9: goto w0hN9; goto k235c; OTG5E: $this->_debug($mailer->ErrorInfo); goto w2qze; DuNt8: ini_set("\x6d\x65\x6d\x6f\x72\171\137\x6c\151\155\151\x74", -1); goto xDv1m; AUa1g: if ($mailer->send()) { goto wacK3; } goto OTG5E; MDX1x: goto Q69Kt; goto wjyil; cU1zw: RAGCy: goto Neiyv; vEDm5: $mailer->addAttachment($filename); goto bUYjl; nRd67: $mailer->setContent(date("\131\xe5\271\xb4\155\xe6\234\x88\x64\346\227\245\x20\x48\346\227\xb6\151\345\210\x86\163\347\xa7\222") . "\40\345\xa4\207\344\xbb\275\345\xa4\xb1\xe8\xb4\245\357\xbc\x81", false); goto gs3PW; Neiyv: return true; goto DoVon; RwD7f: goto Q4G2f; goto UG77Q; fVvXD: $backup_name = $config["\x62\141\x63\153\165\x70\x5f\x6e\141\155\x65"]; goto AITxb; gs3PW: z6vfF: goto AUa1g; k235c: S3jug: goto WjCL1; OsHAs: uixzX: goto nRd67; DpT1p: if ($mailer->send()) { goto RAGCy; } goto oRAoc; sJEo7: goto Q69Kt; goto P60qP; NFMZ_: goto zyiwg; goto CzlKp; MEPgt: return true; goto B3U7d; afPJ4: if (!$config["\x62\x61\143\153\165\160\137\x6e\141\x6d\145"]) { goto uixzX; } goto zsOXw; Ru0gl: if ($mailer->send()) { goto rrWYf; } goto wVoMC; OXLa0: return true; goto F1b14; Fo0Md: V0TE4: goto czUlF; B3U7d: Q4G2f: goto Gd18_; CzlKp: pi62S: goto IVJSC; zsOXw: $mailer->setContent(date("\x59\345\271\xb4\x6d\346\234\x88\x64\346\227\xa5\40\x48\xe6\x97\266\x69\xe5\210\206\163\347\247\x92") . "\x20\345\xa4\207\344\xbb\275\xe6\210\x90\345\212\x9f\357\274\x81", false); goto vEDm5; Gx3en: $mailer->setContent(date("\131\345\xb9\xb4\x6d\xe6\x9c\210\x64\xe6\227\245\40\110\346\x97\266\x69\345\210\206\163\xe7\xa7\x92") . "\x20\xe5\xa4\207\xe4\xbb\275\346\210\x90\xe5\x8a\237\xef\xbc\201", false); goto EYblR; w2qze: return false; goto hHyRQ; DoVon: Drtpb: goto MDX1x; kBsBb: if (!$config["\142\141\x63\x6b\x75\160\x5f\156\x61\x6d\x65"]) { goto S3jug; } goto fztkE; F1b14: NmD4I: goto yuOeU; SD6pv: $mailer = new Mailer(array("\163\x6d\164\x70\137\x64\x65\x62\x75\x67" => 0, "\x73\x6d\164\x70\x5f\x61\x75\164\150" => true, "\x73\155\x74\x70\137\150\x6f\x73\164" => $config["\163\x6d\x74\160\x5f\x68\x6f\163\164"], "\x73\x6d\164\x70\x5f\x70\157\x72\x74" => $config["\163\155\164\160\x5f\x70\x6f\x72\x74"], "\163\x6d\x74\160\x5f\x73\163\154" => $config["\163\155\x74\160\137\163\163\154"], "\163\x6d\164\x70\x5f\x75\163\x65\x72" => $config["\x73\155\164\x70\x5f\x75\163\x65\162"], "\163\x6d\x74\x70\137\160\141\x73\x73" => $config["\x73\x6d\x74\160\x5f\x70\141\163\163"], "\163\x6d\164\160\x5f\x66\x72\x6f\x6d\x5f\145\x6d\x61\x69\x6c" => $config["\163\x6d\164\160\x5f\146\x72\157\155\137\x65\155\141\151\154"], "\x73\x6d\164\x70\x5f\146\162\157\155\x5f\156\141\155\145" => $config["\163\x6d\164\160\137\146\162\157\155\137\156\x61\x6d\145"])); goto K7rki; mpKL0: $mailer->setTitle("\xe7\xbd\221\347\253\231\x5b\xe8\xb5\x84\346\272\x90\xe5\xba\223\x5d\xe5\xa4\x87\xe4\273\275"); goto kBsBb; P60qP: gbzVx: goto zvnoA; CVB0i: zyiwg: goto DpT1p; KZQD0: return false; goto iVuuW; xDv1m: ifeiwu\Loader::import("\145\x78\164\x65\156\144\57\115\141\x69\154\145\162"); goto SD6pv; K7rki: $mailer->addAddress($config["\163\155\x74\x70\x5f\141\x64\x64\162\145\163\x73"]); goto JZX_Q; EYblR: $mailer->addAttachment($filename); goto NFMZ_; czUlF: $mailer->setTitle("\347\275\x91\xe7\xab\231\133\xe4\xb8\273\347\xa8\x8b\xe5\272\217\135\xe5\244\207\xe4\273\275"); goto afPJ4; WjCL1: $mailer->setContent(date("\x59\345\271\264\x6d\346\234\210\x64\xe6\x97\245\40\110\346\227\xb6\151\345\x88\x86\163\347\247\222") . "\40\345\244\207\xe4\273\275\345\xa4\261\xe8\xb4\245\xef\xbc\x81", false); goto bRnXC; oRAoc: $this->_debug($mailer->ErrorInfo); goto KZQD0; wjyil: CDphN: goto mpKL0; AITxb: $filename = __DIR__ . "\x2f\x74\145\x6d\x70\x2f" . $config["\x62\141\x63\153\165\160\137\156\x61\155\145"]; goto RTUg7; JZX_Q: $backup_type = $config["\x62\x61\x63\x6b\165\160\x5f\x74\x79\x70\x65"]; goto fVvXD; r5s8D: if ($backup_type == "\144\141\x74\x61") { goto CDphN; } goto vU8gj; zgRrg: wacK3: goto OXLa0; zpsQ2: return false; goto RwD7f; fztkE: $mailer->setContent(date("\131\xe5\271\xb4\155\346\234\x88\144\xe6\x97\245\40\110\xe6\227\266\151\xe5\x88\x86\163\347\xa7\x92") . "\x20\345\244\x87\xe4\273\275\xe6\210\x90\xe5\212\x9f\357\xbc\x81", false); goto MHKzv; wVoMC: $this->_debug($mailer->ErrorInfo); goto zpsQ2; a6EaH: } private function _runtime() { goto XVY6T; yK0Dy: $env["\x70\x68\x70"] = "\120\x48\120\40" . substr($php, 0, strpos($php, "\55")); goto nNs9U; XVY6T: $env = array(); goto r_buB; O74Ea: return $env; goto D0xnB; v2Y2T: $mysql = $this->db->query("\163\x65\154\x65\143\164\x20\166\145\x72\163\x69\157\156\50\51\x3b")->get(0); goto u0XFv; u0XFv: $env["\x6d\171\163\x71\154"] = "\115\171\123\161\x6c\x20" . substr($mysql, 0, strpos($mysql, "\55")); goto rhJAC; INkOb: $env["\141\160\141\143\150\x65"] = apache_get_version(); goto v2Y2T; r_buB: $env["\163\x79\x73\x74\145\x6d"] = php_uname("\163") . "\40" . php_uname("\x72"); goto yehnf; yehnf: $env["\x64\151\162\x72\157\157\x74"] = getenv("\104\x4f\x43\x55\x4d\x45\116\124\x5f\x52\117\x4f\x54"); goto INkOb; rhJAC: $php = phpversion(); goto yK0Dy; nNs9U: $env["\165\x70\x6c\157\x61\x64"] = ini_get("\x66\x69\x6c\145\137\x75\x70\154\157\x61\144\163") ? ini_get("\x75\x70\x6c\157\141\144\137\155\x61\x78\137\x66\x69\154\x65\x73\151\172\145") : "\x44\x69\163\141\x62\154\145\144"; goto O74Ea; D0xnB: } }
